<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>å¯æ„›éŸ³æ¨‚æ¨è–¦ç³»çµ± ğŸµ</title>
  <style>
    body {
      font-family: "å¾®è»Ÿæ­£é»‘é«”", Arial, sans-serif;
      max-width: 480px;
      margin: 20px auto;
      padding: 10px;
      background: #fff8f0;
      color: #5a3e36;
    }
    h1 {
      text-align: center;
      color: #d2691e;
    }
    h3 {
      margin-top: 20px;
      color: #b04e28;
    }
    label {
      display: block;
      margin: 5px 0;
      cursor: pointer;
    }
    input[type="radio"] {
      margin-right: 8px;
    }
    button {
      background-color: #f4a261;
      border: none;
      border-radius: 20px;
      padding: 10px 20px;
      color: white;
      font-weight: bold;
      font-size: 1rem;
      cursor: pointer;
      margin-top: 15px;
    }
    button:hover {
      background-color: #e76f51;
    }
    #result {
      margin-top: 25px;
      border-top: 1px dashed #b04e28;
      padding-top: 15px;
    }
    a {
      color: #e76f51;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>

  <h1>âœ¨ å¯æ„›éŸ³æ¨‚æ¨è–¦å°å¹«æ‰‹ âœ¨</h1>

  <div>
    <h3>ğŸ’– è«‹é¸æ“‡ä½ ç¾åœ¨çš„å¿ƒæƒ…ï¼ˆéš¨æ©Ÿ5é¸1ï¼‰</h3>
    <div id="moodOptions"></div>
    <button type="button" onclick="refreshMoodOptions()">æ›ä¸€çµ„å¿ƒæƒ…é¸é …</button>
  </div>

  <div>
    <h3>ğŸ¶ æƒ³è½çš„æ›²é¢¨æ˜¯ï¼Ÿï¼ˆéš¨æ©Ÿ5é¸1ï¼‰</h3>
    <div id="genreOptions"></div>
    <button type="button" onclick="refreshGenreOptions()">æ›ä¸€çµ„æ›²é¢¨é¸é …</button>
  </div>

  <button type="button" onclick="searchMusic()" style="width:100%; margin-top:30px;">é–‹å§‹æ¨è–¦ï¼</button>

  <div id="result"></div>

<script>
  const API_KEY = 'AIzaSyC0FVu9nGrvov7pJQocsnAjRIAIrCmms0s'; 

  const moods = [
    "é–‹å¿ƒ", "æ‚²å‚·", "èˆˆå¥®", "ç–²æ†Š", "å¹³éœ", "ç„¦æ…®", "æœŸå¾…", "æ‡·å¿µ", "å¯§éœ",
    "æ¿€å‹•", "ç„¡èŠ", "æº«æš–", "å­¤å–®", "æ†¤æ€’", "ç·Šå¼µ", "å¿«æ¨‚", "æ„Ÿå‹•", "å†·éœ",
    "æ»¿è¶³", "å®³ç¾", "å¤±è½", "è¼•é¬†", "æ€å¿µ", "æ”¾é¬†", "æ…µæ‡¶", "é›£é", "æŒ¯å¥®",
    "å®‰å¿ƒ", "å¤±æœ›", "æœŸå¾…"
  ];

  const genres = [
    "æµè¡Œ", "æ–æ»¾", "çˆµå£«", "å¤å…¸", "å˜»å“ˆ", "R&B", "é›»å­", "æ°‘è¬ ", "è—èª¿",
    "èˆæ›²", "é›·é¬¼", "é„‰æ‘", "é‡é‡‘å±¬", "é›·é¬¼", "æ‹‰ä¸", "éˆé­‚", "æ”¾å…‹", "é›·é¬¼",
    "ç¯€å¥è—èª¿", "é›»å½±é…æ¨‚", "ç¨ç«‹", "å¦é¡", "æ°‘è¬ æ–æ»¾", "K-pop", "æ—¥ç³»æµè¡Œ",
    "çˆµå£«èåˆ", "ç’°å¢ƒéŸ³æ¨‚", "ä¸–ç•ŒéŸ³æ¨‚"
  ];

  function getRandomOptions(arr, n) {
    const shuffled = [...arr].sort(() => 0.5 - Math.random());
    return shuffled.slice(0, n);
  }

  function refreshMoodOptions() {
    const selected = getRandomOptions(moods, 5);
    const container = document.getElementById('moodOptions');
    container.innerHTML = '';
    selected.forEach((mood, i) => {
      const label = document.createElement('label');
      label.innerHTML = `<input type="radio" name="mood" value="${mood}" required> ${mood}`;
      container.appendChild(label);
    });
  }

  function refreshGenreOptions() {
    const selected = getRandomOptions(genres, 5);
    const container = document.getElementById('genreOptions');
    container.innerHTML = '';
    selected.forEach((genre, i) => {
      const label = document.createElement('label');
      label.innerHTML = `<input type="radio" name="genre" value="${genre}" required> ${genre}`;
      container.appendChild(label);
    });
  }

  async function searchMusic() {
    const mood = document.querySelector('input[name="mood"]:checked');
    const genre = document.querySelector('input[name="genre"]:checked');
    const resultDiv = document.getElementById('result');

    if (!mood || !genre) {
      alert("è«‹å…ˆé¸æ“‡ä½ çš„å¿ƒæƒ…å’Œæ›²é¢¨å–”ï¼ğŸ’–");
      return;
    }

    const query = `${mood.value} ${genre.value} éŸ³æ¨‚`;

    resultDiv.innerHTML = `<p>æ­£åœ¨ç‚ºä½ æœå°‹è·Ÿã€Œ${query}ã€ç›¸é—œçš„éŸ³æ¨‚...</p>`;

    try {
      const response = await fetch(
        `https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=3&q=${encodeURIComponent(query)}&type=video&key=${API_KEY}`
      );
      const data = await response.json();

      if (data.error) {
        resultDiv.innerHTML = `<p>ç™¼ç”ŸéŒ¯èª¤ï¼š${data.error.message}</p>`;
        return;
      }

      if (data.items.length === 0) {
        resultDiv.innerHTML = `<p>æ‰¾ä¸åˆ°ç›¸é—œéŸ³æ¨‚ï¼Œè«‹æ›å€‹å¿ƒæƒ…æˆ–æ›²é¢¨è©¦è©¦çœ‹ï¼</p>`;
        return;
      }

      let html = `<h3>æ¨è–¦çµ¦ä½ çš„éŸ³æ¨‚ ğŸ§</h3>`;
      data.items.forEach(item => {
        const title = item.snippet.title;
        const videoId = item.id.videoId;
        html += `<p>ğŸµ <a href="https://www.youtube.com/watch?v=${videoId}" target="_blank" rel="noopener">${title}</a></p>`;
      });

      resultDiv.innerHTML = html;

    } catch (error) {
      resultDiv.innerHTML = `<p>ç¶²è·¯ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹ç¨å¾Œå†è©¦ï¼</p>`;
      console.error(error);
    }
  }

  // åˆå§‹åŒ–é é¢é¸é …
  refreshMoodOptions();
  refreshGenreOptions();
</script>
</body>
</html>
